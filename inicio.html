<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Juego Reciclaje - Responsive</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body class="bg-gradient-to-br from-gray-100 to-white min-h-screen text-gray-800">

  <!-- Header -->
  <header class="bg-lime-500 text-white shadow">
    <div class="max-w-7xl mx-auto px-4 py-3 flex items-center justify-between gap-4">
      <div class="grid grid-cols-5 h-20 items-center">
        <div class="col-star-2">
          <p class="text-2xl font-semibold uppercase opacity-80 text-blue-900">Área</p>
          <h1 id="bienvenida" class="text-lg font-bold">Bienvenido al sistema</h1>
        </div>
        
        <div class="col-start-5">
            <a href="index.html" class="end"><img src="sources/imagess/logo_blanco.png" alt="Logo" class="h-20 w-auto object-contain"  /></a>         
        </div>
      </div>

      <div class="flex items-center">
        <!-- Toggle sidebar on small screens -->
        <button id="togglePlayers" class="md:hidden inline-flex items-center gap-2 px-3 py-2 bg-white/10 rounded-md hover:bg-white/20">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3 5h14a1 1 0 010 2H3a1 1 0 010-2zm0 4h14a1 1 0 010 2H3a1 1 0 010-2zm0 4h14a1 1 0 010 2H3a1 1 0 010-2z" clip-rule="evenodd" /></svg>
          <span class="text-sm">Jugadores</span>
        </button>
      </div>
    </div>
  </header>

  <!-- Main layout -->
  <main class="max-w-[96%] mx-auto m-4 grid grid-cols-1 md:grid-cols-5 gap-4">

    <!-- Sidebar / Players -->
    <aside id="sidebar" class="md:col-span-1 bg-white rounded-lg p-4 shadow md:sticky md:top-6 z-10">
      <div class="flex flex-col gap-3">
        <div class="flex items-center justify-between">
          <h2 class="font-semibold text-lg">Jugadores</h2>
          <span id="currentBadge" class="text-sm text-gray-600"></span>
        </div>

        <select id="buscador" class="w-full border border-gray-300 rounded px-3 py-2 text-sm">
          <option value="">-- Selecciona un jugador --</option>
        </select>

        <button id="guardarNombre" class="w-full px-4 py-2 bg-lime-500 text-white rounded-md hover:bg-lime-600 transition">Agregar</button>

        <div class="mt-2">
          <h3 class="font-semibold text-sm">Lista</h3>
          <ul id="lista" class="mt-2 space-y-2 max-h-64 overflow-auto"></ul>
        </div>

        <div class="mt-4 text-sm text-gray-600 italic">Selecciona un jugador para iniciar.</div>
      </div>
    </aside>

    <!-- Game area -->
    <section class="md:col-span-4 bg-white rounded-lg p-6 shadow">

      <!-- Level indicator / controls -->
      <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-6">
        <div>
          <h2 id="tituloNivel" class="text-2xl font-bold">Nivel 1: Escribe el nombre del tacho</h2>
          <p id="subtitulo" class="text-sm text-gray-600">Responde en el campo y presiona Enter</p>
        </div>
        <div class="flex items-center gap-2">
          <div class="text-center">
            <div class="text-xs text-gray-500">Jugador activo</div>
            <div id="jugadorActivoDisplay" class="text-lg font-bold">—</div>
          </div>
          <button id="resetGame" class="px-3 py-2 bg-gray-100 border rounded-md text-sm">Reiniciar sesión</button>
        </div>
      </div>

      <!-- Nivel 1 -->
      <div id="nivel1" class="space-y-4">
        <div id="ContenedorNombreTacho" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"></div>
        <div id="TituloNivel1"></div>
        <div id="ContenedorTacho" class="grid grid-cols-4 gap-4"></div>     
        
      </div>

      <!-- Nivel 2 (oculto al inicio) -->
      <div id="nivel2" class="hidden space-y-4">
        <h3 class="text-lg font-semibold">Nivel 2: Arrastra o toca para clasificar</h3>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
          <!-- Items a reciclar -->
          <div>
            <h4 class="font-semibold mb-2">Residuos</h4>
            <div id="itemsReciclar" class="grid grid-cols-2 sm:grid-cols-3 gap-3 p-3 bg-gray-50 rounded h-64 overflow-auto"></div>
          </div>

          <!-- TachOS destino (ocultar en pantallas muy pequeñas con scroll horizontal) -->
          <div class="lg:col-span-2">
            <h4 class="font-semibold mb-2">Tachos</h4>
            <div id="contenedorNivel2" class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3 p-3 bg-gray-50 rounded min-h-[220px]"></div>
          </div>
        </div>

      </div>

    </section>

  </main>

  <script>
    // ---------------------------
    // Datos (puedes mantener los tuyos)
    // ---------------------------
    const params = new URLSearchParams(window.location.search);
    const Usuario_area = params.get('area');
    const bienvenida = document.getElementById('bienvenida');
    const jugadorActivoDisplay = document.getElementById('jugadorActivoDisplay');
    const currentBadge = document.getElementById('currentBadge');

    if (Usuario_area) {
      bienvenida.textContent = Usuario_area;
    }

    const tachos = [
      {id:1, color:'azul', nombre:'Papel y carton', image:'sources/imagess/tacho_azul.jpg', puntos:20},
      {id:2, color:'verde', nombre:'RAEE', image:'sources/imagess/tacho_verde.jpg', puntos:20},
      {id:3, color:'plomo', nombre:'Vidrio', image:'sources/imagess/tacho_plomo.jpg', puntos:20},
      {id:4, color:'blanco', nombre:'Plastico', image:'sources/imagess/tacho_blanco.jpg', puntos:20},
      {id:5, color:'naranja', nombre:'Organicos', image:'sources/imagess/Tachos01_Mesa de trabajo 1 copia 8.jpg', puntos:20},
      {id:6, color:'negro', nombre:'No aprovechables', image:'sources/imagess/tacho_negro.jpg', puntos:20},
      {id:7, color:'rojo', nombre:'Residuos peligrosos', image:'sources/imagess/tacho_rojo.jpg', puntos:20},
      {id:8, color:'amarillo', nombre:'Metales', image:'sources/imagess/tacho_amarillo.jpg', puntos:20}
    ];

    const nombreTachos =[
      {nombre: "Papel y carton"},
      {nombre: "RAEE"},
      {nombre: "Vidrio"},
      {nombre: "Plastico"},
      {nombre: "Organicos"},
      {nombre: "No aprovechables"},
      {nombre: "Residuos peligrosos"},
      {nombre: "Metales"}
    ]

    const nombreTachosAleatorios = [...nombreTachos].sort(() => Math.random() -0.5);

    const residuos =[
            {id: 1, nombre:"Lata de metal", imagen : "sources/imagess/metal-lata.jpg", puntaje: 20, tacho: ""},
            {id: 2, nombre:"Recogedor de metal", imagen : "sources/imagess/metal-recogedor.jpg", puntaje: 20, tacho: ""},
            {id: 3, nombre:"Tornillos de metal", imagen : "sources/imagess/metal-tornillos.jpeg", puntaje: 20, tacho: ""},
            {id: 4, nombre:"Caja de papel", imagen : "sources/imagess/papel-caja.jpg", puntaje: 20, tacho: "azul"},
            {id: 5, nombre:"Cuaderno", imagen : "sources/imagess/papel-cuaderno.jpg", puntaje: 20, tacho: ""},
            {id: 6, nombre:"Hoja Bond", imagen : "sources/imagess/papel-hoja bond.jpg", puntaje: 20, tacho: "azul"},
            {id: 7, nombre:"Periodico", imagen : "sources/imagess/papel-periodico.jpg", puntaje: 20, tacho: "azul"},
            {id: 8, nombre:"Revista", imagen : "sources/imagess/papel-revista.jpeg", puntaje: 20, tacho: ""},
            {id: 9, nombre:"Sobremanila", imagen : "sources/imagess/papel-sobremanila.jpg", puntaje: 20, tacho: ""},
            {id: 10, nombre:"Botella de plastico", imagen : "sources/imagess/plastico- botellas.jpg", puntaje: 20, tacho: ""},
            {id: 11, nombre:"Bolsa de plastico", imagen : "sources/imagess/plastico-bolsa.webp", puntaje: 20, tacho: ""},
            {id: 12, nombre:"Botella de Yogurt", imagen : "sources/imagess/plastico-botella yogur.webp", puntaje: 20, tacho: ""},
            {id: 13, nombre:"Film", imagen : "sources/imagess/plastico-film.jpg", puntaje: 20, tacho: ""},
            {id: 14, nombre:"Taper de plastico", imagen : "sources/imagess/plastico-taper.webp", puntaje: 20, tacho: ""},
            {id: 15, nombre:"Vaso de plastico", imagen : "sources/imagess/plastico-vaso plastico.webp", puntaje: 20, tacho: ""},
        ];

        const residuosAleatorios = [...residuos]
        .sort(() => Math.random() -5)
        .slice(0,10);

    // ---------------------------
    // DOM references
    // ---------------------------
    const buscador = document.getElementById('buscador');
    const guardar = document.getElementById('guardarNombre');
    const listaJugador = document.getElementById('lista');

    // Data runtime
    const respuestasJugadores = {}; // { id: {nombre, puntaje, respondidos: {tachoId: true}} }
    let jugadorActivo = null;

    // Fetch players from server
    function cargarJugadores() {
      fetch(`sources/buscar.php?area=${encodeURIComponent(Usuario_area)}`)
        .then(res => res.json())
        .then(data => {
          buscador.innerHTML = `<option value="">-- Selecciona un jugador --</option>`;
          data.forEach(j => {
            const option = document.createElement('option');
            option.value = j.u_idUsuario;
            option.textContent = j.u_nombre;
            buscador.appendChild(option);
          });
        })
        .catch(err => console.error('Error cargando jugadores:', err));
    }

    cargarJugadores();

    // Add player to sidebar list
    guardar.addEventListener('click', () => {
      const nombreJugador = buscador.options[buscador.selectedIndex]?.text || '';
      const idJugador = buscador.value;

      if (!idJugador) {
        Swal.fire('Seleccione un jugador', '', 'error');
        return;
      }

      if (respuestasJugadores[idJugador]) {
        Swal.fire('El jugador ya está en la lista', '', 'warning');
        return;
      }

      respuestasJugadores[idJugador] = { nombre: nombreJugador, puntaje: 0, respondidos: {} };

      const li = document.createElement('li');
      li.dataset.jugador = idJugador;
      li.className = 'flex items-center justify-between gap-3 p-2 rounded hover:bg-gray-50 cursor-pointer';

      const nombre = document.createElement('span');
      nombre.textContent = nombreJugador;

      const puntaje = document.createElement('span');
      puntaje.className = 'text-lime-600 font-semibold';
      puntaje.textContent = '0';

      li.appendChild(nombre);
      li.appendChild(puntaje);

      li.addEventListener('click', () => setJugadorActivo(idJugador));

      listaJugador.appendChild(li);

      buscador.value = '';
    });

    function setJugadorActivo(id) {
      jugadorActivo = id;
      // Highlight selected
      [...listaJugador.children].forEach(li => li.classList.toggle('bg-lime-50', li.dataset.jugador === id));
      const data = respuestasJugadores[id];
      jugadorActivoDisplay.textContent = data ? data.nombre : '—';
      currentBadge.textContent = data ? `Puntos: ${data.puntaje}` : '';
    }

    // ---------------------------
    // Guardar puntaje (backend)
    // ---------------------------
    function guardarPuntaje(usuarioID, puntaje, nivel = 1) {
      if (!usuarioID) return Promise.resolve();
      return fetch('sources/guardar_puntaje.php', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ usuario_id: usuarioID, puntaje: puntaje, nivel: nivel })
      })
      .then(res => res.json())
      .then(data => {
        if (data.status === 'ok') {
          console.log('Puntaje guardado');
        } else {
          console.error('Error al guardar:', data.msg);
        }
      })
      .catch(err => console.error('Error enviando puntaje:', err));
    }

    // ---------------------------
    // Nivel 1
    // ---------------------------
  function iniciarNivel1() {
    const contenedorTacho = document.getElementById('ContenedorTacho');
    const contenedorNombre = document.getElementById('ContenedorNombreTacho');
    contenedorTacho.innerHTML = '';
    contenedorNombre.innerHTML = '';

    // Genera tarjetas con nombres
    nombreTachosAleatorios.forEach(tachoNombre => {
      const card = document.createElement('div');
      card.className = 'flex flex-col items-center border p-3 rounded-lg shadow-sm bg-white cursor-pointer hover:bg-gray-100 hover:border-black';
      card.dataset.nombretacho = tachoNombre.nombre; // dataset correcto

      const nombre = document.createElement('p');
      nombre.textContent = tachoNombre.nombre;
      nombre.className = 'text-xl';

      card.appendChild(nombre);
      contenedorNombre.appendChild(card);

      card.draggable = true;
      card.addEventListener('dragstart', e => {
        e.dataTransfer.setData('nombreTacho', tachoNombre.nombre);
      });
    });

    // Título
    const titulo = document.getElementById('TituloNivel1');
    titulo.innerHTML = '';
    const textTitulo = document.createElement('p');
    textTitulo.textContent = 'Contenedores de reciclaje';
    textTitulo.className = 'text-2xl font-bold uppercase';
    titulo.appendChild(textTitulo);

    // Genera tachos
    tachos.forEach(tacho => {
      const card = document.createElement('div');
      card.className = 'flex flex-col items-center border p-3 rounded-lg shadow-sm bg-white';

      const img = document.createElement('img');
      img.src = tacho.image;
      img.alt = tacho.nombre;
      img.className = "w-[9rem] object-cover rounded mb-2";

      card.appendChild(img);
      contenedorTacho.appendChild(card);

      // Drop permitido
      card.addEventListener('dragover', (e) => e.preventDefault());

      // Lógica cuando sueltas un nombre
      card.addEventListener('drop', (e) => {
        e.preventDefault();
        const nombreID = e.dataTransfer.getData('nombreTacho');
        handleDropNombre(nombreID, tacho);
      });
    });

    function handleDropNombre(nombretacho, tacho) {
      const nombre = nombreTachos.find(n => n.nombre === nombretacho); // comparación correcta
      if (!nombre) return;

      if (!jugadorActivo) {
        Swal.fire('Atención', 'Debe seleccionar un jugador antes de jugar', 'warning');
        return;
      }

      if (nombre.nombre === tacho.nombre) {
        Swal.fire({toast: true, position: 'top-end', icon: 'success', title: `${nombre.nombre} va en el contenedor ${tacho.color}`, showConfirmButton: false, timer: 900
        });
        respuestasJugadores[jugadorActivo].puntaje += 20; 
      } else {
        Swal.fire({
          toast: true,
          position: 'top-end',
          icon: 'error',
          title: `${nombre.nombre} no va en el contenedor ${tacho.color}`,
          showConfirmButton: false,
          timer: 900
        });
        respuestasJugadores[jugadorActivo].puntaje -= 5; // resta 5
      }

      // Actualizar puntaje en la lista
      const liJugador = [...listaJugador.children].find(li => li.dataset.jugador === jugadorActivo);
      if (liJugador) liJugador.querySelector('span:last-child').textContent = respuestasJugadores[jugadorActivo].puntaje;
      currentBadge.textContent = `puntos: ${respuestasJugadores[jugadorActivo].puntaje}`;

      // Eliminar el nombre arrastrado
      const elem = document.querySelector(`[data-nombretacho="${nombretacho}"]`);
      if (elem) elem.remove();

      // Revisar si terminó el nivel
      if (contenedorNombre.children.length === 0) {
        Swal.fire(
          'Nivel 1 TERMINADO',
          `${respuestasJugadores[jugadorActivo].nombre} terminó con ${respuestasJugadores[jugadorActivo].puntaje} puntos`
        ).then(() => {
          if (jugadorActivo) {
            guardarPuntaje(jugadorActivo, respuestasJugadores[jugadorActivo].puntaje, 1).then(()=>{              
              respuestasJugadores[jugadorActivo].puntaje = 0;
              const liJugador = [...listaJugador.children].find(li => li.dataset.jugador === jugadorActivo);
              if (liJugador) liJugador.querySelector('span:last-child').textContent = 0;
              currentBadge.textContent = 'Puntos: 0';

              document.getElementById('nivel1').classList.add('hidden');
              document.getElementById('nivel2').classList.remove('hidden');
              iniciarNivel2(); 
            })           
          }
        });
      }
    }
  }

    

    function evaluarInput(input, jugador) {
      if (!jugador) {
        Swal.fire('Atención', 'Debe seleccionar un jugador antes de responder', 'warning');
        return;
      }

      const jugadorData = respuestasJugadores[jugador];
      const id = parseInt(input.dataset.tachoID, 10);

      if (jugadorData.respondidos[id]) {
        Swal.fire('Ya respondiste este tacho', '', 'info');
        return;
      }

      const tacho = tachos.find(t => t.id === id);
      if (!tacho) return;

      if (input.value.trim().toLowerCase() === tacho.nombre.toLowerCase()) {
        jugadorData.puntaje += tacho.puntos;
        Swal.fire({ toast:true, position:'top-end', icon:'success', title:'Correcto', showConfirmButton:false, timer:900 });
      } else {
        jugadorData.puntaje -= 5;
        Swal.fire({ toast:true, position:'top-end', icon:'error', title:'Incorrecto', showConfirmButton:false, timer:900 });
      }

      jugadorData.respondidos[id] = true;
      input.value = '';
      input.disabled = true;
      input.classList.add('bg-gray-100');

      // actualizar puntaje en UI
      const liJugador = [...listaJugador.children].find(li => li.dataset.jugador === jugador);
      if (liJugador) liJugador.querySelector('span:last-child').textContent = jugadorData.puntaje;
      currentBadge.textContent = `Puntos: ${jugadorData.puntaje}`;
    }
   

    // ---------------------------
    // Nivel 2 (drag & touch friendly)
    // ---------------------------
    const isTouch = ('ontouchstart' in window) || navigator.maxTouchPoints > 0;

    function iniciarNivel2() {
      const itemsReciclar = document.getElementById('itemsReciclar');
      const contenedorNivel2 = document.getElementById('contenedorNivel2');
      itemsReciclar.innerHTML = '';
      contenedorNivel2.innerHTML = '';

      // crear residuos (draggables o tap)
      residuosAleatorios.forEach(residuo => {
        const card = document.createElement('div');
        card.className = 'flex flex-col items-center p-2 bg-white rounded shadow cursor-move';
        card.draggable = true;
        card.dataset.residuoId = residuo.id;
        card.setAttribute('role', 'button');

        const img = document.createElement('img');
        img.src = residuo.imagen;
        img.alt = residuo.nombre;
        img.className = 'w-20 h-20 object-contain mb-1';

        const span = document.createElement('span');
        span.textContent = residuo.nombre;
        span.className = 'text-sm text-center';

        card.appendChild(img);
        card.appendChild(span);
        itemsReciclar.appendChild(card);

        if (!isTouch) {
          card.draggable = true;
          card.addEventListener('dragstart', (e) => {
            e.dataTransfer.setData('residuoId', residuo.id);
          });
        } else {
          // touch fallback: tap to select
          card.addEventListener('click', () => {
            // toggle selection
            if (selectedResiduo && selectedResiduo.dataset.residuoId === card.dataset.residuoId) {
              card.classList.remove('ring-2', 'ring-lime-400');
              selectedResiduo = null;
            } else {
              // clear previous selection
              if (selectedResiduo) selectedResiduo.classList.remove('ring-2', 'ring-lime-400');
              selectedResiduo = card;
              card.classList.add('ring-2', 'ring-lime-400');
            }
          });
        }
      });

      // crear tachos como zonas drop
      tachos.forEach(tacho => {
        const card = document.createElement('div');
        card.className = 'flex flex-col items-center p-3 bg-white rounded shadow text-center';
        card.dataset.tachoColor = tacho.color;
        card.dataset.tachoId = tacho.id;
        card.setAttribute('aria-label', tacho.nombre);

        const img = document.createElement('img');
        img.src = tacho.image;
        img.alt = tacho.nombre;
        img.className = 'w-24 h-24 object-cover mb-1 rounded';

        const span = document.createElement('span');
        span.textContent = tacho.nombre;
        span.className = 'text-sm';

        card.appendChild(img);
        card.appendChild(span);
        contenedorNivel2.appendChild(card);

        // handlers for drop
        card.addEventListener('dragover', (e) => e.preventDefault());
        card.addEventListener('drop', (e) => {
          e.preventDefault();
          const residuoId = e.dataTransfer.getData('residuoId');
          handleDrop(residuoId, tacho);
        });

        // touch fallback: tap a tacho to drop selectedResiduo
        card.addEventListener('click', () => {
          if (isTouch && selectedResiduo) {
            const residuoId = selectedResiduo.dataset.residuoId;
            handleDrop(residuoId, tacho);
          }
        });
      });

      // selectedResiduo used on touch devices
      let selectedResiduo = null;

      function handleDrop(residuoId, tacho) {
        const residuo = residuos.find(r => r.id == residuoId);
        if (!residuo) return;

        if (!jugadorActivo) {
          Swal.fire('Atención', 'Debe seleccionar un jugador antes de jugar', 'warning');
          return;
        }

        if (residuo.tacho === tacho.color) {
          Swal.fire({ toast:true, position:'top-end', icon:'success', title:`${residuo.nombre} va en ${tacho.nombre}`, showConfirmButton:false, timer:900 });
          respuestasJugadores[jugadorActivo].puntaje += residuo.puntaje;
        } else {
          Swal.fire({ toast:true, position:'top-end', icon:'error', title:`${residuo.nombre} no va en ${tacho.nombre}`, showConfirmButton:false, timer:900 });
          respuestasJugadores[jugadorActivo].puntaje -= 5;
        }

        // actualizar UI puntaje
        const liJugador = [...listaJugador.children].find(li => li.dataset.jugador === jugadorActivo);
        if (liJugador) liJugador.querySelector('span:last-child').textContent = respuestasJugadores[jugadorActivo].puntaje;
        currentBadge.textContent = `Puntos: ${respuestasJugadores[jugadorActivo].puntaje}`;

        // remover residuo del DOM
        const elem = document.querySelector(`[data-residuo-id="${residuoId}"]`);
        if (elem) elem.remove();
        // clear selectedResiduo
        if (selectedResiduo && selectedResiduo.dataset.residuoId === String(residuoId)) selectedResiduo = null;

        // si ya no quedan residuos, terminar
        const itemsRec = document.getElementById('itemsReciclar');
        if (itemsRec.children.length === 0) {
            if (jugadorActivo) guardarPuntaje(jugadorActivo, respuestasJugadores[jugadorActivo].puntaje, 2);

            // mostrar opción para jugar otra vez o volver a inicio
            Swal.fire('🎉 Fin del Juego', `${respuestasJugadores[jugadorActivo].nombre} terminó con ${respuestasJugadores[jugadorActivo].puntaje} puntos`, 'success').then(() => {
              guardarPuntaje(jugadorActivo,respuestasJugadores[jugadorActivo].puntaje,2);
              document.getElementById('nivel2').classList.add('hidden');
              document.getElementById('nivel1').classList.remove('hidden');
              setJugadorActivo('-');
              jugadorActivo = null;
              iniciarNivel1();
            });
        }
      }
    }

    // ---------------------------
    // UI helpers
    // ---------------------------
    document.getElementById('togglePlayers').addEventListener('click', () => {
      const sb = document.getElementById('sidebar');
      sb.classList.toggle('hidden');
    });
    document.getElementById('resetGame').addEventListener('click', () => {
      // reinicia todo (estado local)
      Object.keys(respuestasJugadores).forEach(k => { respuestasJugadores[k].puntaje = 0; respuestasJugadores[k].respondidos = {}; });
      [...listaJugador.children].forEach(li => li.querySelector('span:last-child').textContent = '0');
      currentBadge.textContent = '';
      iniciarNivel1();
      document.getElementById('nivel2').classList.add('hidden');
      document.getElementById('nivel1').classList.remove('hidden');
    });

    // inicializar
    window.addEventListener('load', () => {
      document.getElementById('nivel1').classList.remove('hidden');
      iniciarNivel1();
    });

  </script>
</body>
</html>
