<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Selección de Área</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <style>
  html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    overflow: hidden; /* fuerza que nunca aparezca scroll */
  }
</style>
</head>
<body class="bg-gray-100">

  <!-- HEADER -->
  <header class="bg-white border-b-8 border-lime-500 flex items-center ">
    <img src="../sources/imagess/logo-eil.png" alt="EIL" class="h-20 w-auto px-10 py-2 my-2 ">
  </header>

<main class="w-full bg-[url('../sources/imagess/fondo.jpg')] bg-center bg-cover flex items-center justify-center overflow-hidden" style="height: calc(100vh - 96px); ">
  <!-- Caja de contenido -->
  <div class="bg-white/60 rounded-2xl shadow-lg p-8 w-[60%] max-w-6xl">

    <!-- GRID DE BOTONES -->
    <div id="contenedor" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 text-center">
    </div>
  </div>
</main>
  <!-- SCRIPT -->
  <script>
    const areas = [
      {nombre : "Desorción", nombreArea: "DESORCION", puntaje : 0},
      {nombre : "T.I", nombreArea: "TI",  puntaje : 0},
      {nombre : "Fundición y refinación", nombreArea: "FUNDICION Y REFINACION", puntaje : 0},
      {nombre : "Administración", nombreArea: "ADMINISTRACION", puntaje : 0},
      {nombre : "Laboratorio quimico", nombreArea: "LABORATORIO QUIMICO", puntaje : 0},
      {nombre : "Laboratorio metalurgico", nombreArea: "LABORATORIO METALURGICO", puntaje : 0},
      {nombre : "Mantenimiento", nombreArea: "MANTENIMIENTO", puntaje : 0},
      {nombre : "Ssoma", nombreArea: "SSOMA", puntaje : 0},
      {nombre : "Contabilidad", nombreArea: "CONTABILIDAD",  puntaje : 0},
      {nombre : "Cumplimiento", nombreArea: "CUMPLIMIENTO", puntaje : 0},
      {nombre : "Gestion Humana", nombreArea: "GESTION HUMANA", puntaje : 0},
      {nombre : "Tesoreria", nombreArea: "TESORERIA", puntaje : 0},
      {nombre : "Gerencia General", nombreArea: "GERENCIA GENERAL", puntaje : 0},
      {nombre : "Comercial", nombreArea: "COMERCIAL", puntaje : 0},
      {nombre : "Logistica", nombreArea: "LOGISTICA", puntaje : 0},
      {nombre : "Planta", nombreArea: "PLANTA", puntaje : 0},
      {nombre : "Servicios Generales", nombreArea: "SERVICIOS GENERALES", puntaje : 0},
      {nombre : "Almacen", nombreArea: "ALMACEN", puntaje : 0} 
    ];
    const contenedor = document.getElementById("contenedor");

    function blockArea (){
      contenedor.innerHTML = "";
      areas.forEach(area =>{          
        //BG BUTTON: bg-blue-900 text-white
        const button = document.createElement("button");
        button.className = `w-full h-16 cursor-pointer rounded-xl font-semibold text-xl shadow-md hover:scale-105 transition-transform flex flex-col justify-center bg-lime-500 text-black`;

        const nombre = document.createElement("span");
        nombre.textContent = area.nombre;

        const puntaje = document.createElement("span");
        puntaje.textContent = `Puntaje: ${area.puntaje ?? 0}`;
        puntaje.className= 'text-red-600  text-xs'

        button.appendChild(nombre);
        button.appendChild(puntaje);
        contenedor.appendChild(button);

        button.addEventListener('click', ()=>{
          const nombreArea = button.nombre;
        })
      })
    };

    async function cargarPuntaje() {
      try{
        const res = await fetch("../sources/php/puntajeArea.php");
        if (!res.ok) throw new Error(`Error HTTP: ${res.status}`);
        const data = await res.json();

        console.log("Datos recibidos:", data);

        areas.forEach(area =>{
          const areaPuntaje = data[area.nombreArea];
          if(areaPuntaje) {
            area.puntaje = areaPuntaje;
          }
        });

        blockArea();
      }catch(err){
        console.error("error al cargar el puntaje", err);
        blockArea();
      }
    }

    cargarPuntaje();

  </script>
</body>
</html>

